# Руководство по внесению изменений

## Работа с ветками
- Основная ветка `main` всегда остаётся стабильной; новые задачи выполняются в отдельных ветках вида `feature/<краткое-описание>` или `fix/<краткое-описание>`.
- Перед созданием ветки обновляйте `main`: `git checkout main && git pull`.
- Создавайте ветку: `git checkout -b feature/add-cli-option`.
- Регулярно подтягивайте изменения из `main` и делайте rebase, чтобы история оставалась линейной: `git fetch origin && git rebase origin/main`.
- После завершения работы отправляйте ветку в удалённый репозиторий `git push -u origin feature/add-cli-option` и открывайте pull request с описанием задачи и ключевых изменений.

## Требования к коммитам
- Дробите работу на логически завершённые коммиты; не смешивайте разные задачи.
- Используйте осмысленные сообщения в повелительном наклонении на английском: `Add currency cache`, `Fix rate formatting`.
- Перед коммитом проверяйте код: `go test ./...` и `go vet ./...`.
- Удаляйте лишние файлы (темп, кэш) перед коммитом и проверяйте `git status`, чтобы в историю не попало ничего лишнего.
- Для правок поверх чужих веток предпочтителен интерактивный rebase (`git rebase -i`) вместо merge — так история останется чистой.

## Стиль и соглашения
- Следуйте стандартам Go из официальной документации: `gofmt` для форматирования, `go doc Effective Go`, `Code Review Comments`.
- Обязательно запускайте `gofmt` и `goimports`; код без автоформатирования не принимается.
- Придерживайтесь рекомендаций [Uber Go Style Guide](https://github.com/uber-go/guide):
  - Названия пакетов — короткие, без подчеркиваний.
  - Ошибки оформляйте в виде `if err != nil { ... }` и возвращайте их максимально рано.
  - Избегайте глобального состояния; используйте интерфейсы для зависимостей.
  - Лимитируйте побочные эффекты, упрощайте контролируемые конструкции и явно документируйте экспортируемые функции.
- Документируйте публичные функции и типы, используя комментарии формата GoDoc: `// RateService converts ...`.
- Стиль тестов: BDD необязателен; используйте таблицы тестов, говорящие имена и проверяйте ошибки через `t.Fatalf`/`t.Errorf`.

Соблюдение этих правил ускоряет ревью и облегчает поддержку проекта. Если есть сомнения — поднимайте вопрос в pull request или создавайте issue.
